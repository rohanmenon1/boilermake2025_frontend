/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2025 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const T=require("react"),b=require("../GridColumn.js"),y=require("@progress/kendo-data-query"),m=require("@progress/kendo-react-data-tools"),O=require("./_serverModule.js"),j=require("./_clientModule.js"),u=require("../contextMenu/enums.js");function p(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const S=p(T);function M(e,t){const r=(e!=null?e:"").split(".");let i=t;return r.forEach(o=>{i=i?i[o]:void 0}),i}function w(e,t,r,i,o,s,n,a,d,l,c=0,f){var v;let C=c;for(let h=0;h<t.length;h++){let I;if(!o||t[h].value===void 0||t[h].items===void 0){e[e.length]={dataIndex:i.index,dataItem:t[h],rowType:"data",level:c,group:f,expanded:(v=s?M(s,t[h]):l&&!!(n!=null&&n[y.getter(l)(t[h])]))!=null?v:!1},i.index++;continue}else{let x;f!=null&&f.parents?x=[{field:f.field,value:f.value},...f.parents]:f?x=[f]:x=[],I={field:t[h].field,value:t[h].value,parents:x}}C=Math.max(C,c+1);let g=!1;if(s)g=M(s,t[h])!==!1;else{const x=m.findGroupExpand(a||[],I);x?g=x.expanded!==!1:g=d!==!1}e[e.length]={dataIndex:-1,dataItem:t[h],level:c,group:I,rowType:"groupHeader",expanded:g},g&&(I.expanded=g,C=Math.max(w(e,t[h].items,r,i,o,s,n,a,d,l,c+1,I),C)),(r==="always"||g&&r==="visible")&&(e[e.length]={dataIndex:-1,dataItem:t[h],rowType:"groupFooter",level:c,expanded:g})}return C}const k=(e,t)=>typeof e.colSpan=="function"?e.colSpan({dataItem:t,column:e}):e.colSpan||1;function G(e,t){const r=[[]];let i=0;for(let n=e.length-1;n>=0;n--)i=Math.max(i,e[n].depth),e[n].headerColSpan=e[n].headerColSpan||1,e[n].children.length>0&&(e[n].headerColSpan=e[n].children.reduce((a,d)=>d.hidden?a:a+d.headerColSpan,0));const o=[];let s=1;return e.forEach((n,a)=>{r[n.depth]=r[n.depth]||[];let d=!1;r[n.depth].length===0&&(s<=1?s=1+(n.children.length>0?0:i-n.depth):(s--,d=!0)),n.rowSpan=1+(n.children.length>0?0:i-n.depth),n.kFirst=d,n.index=r[n.depth].length,r[n.depth].push(a),n.ariaColumnIndex=o[n.depth]?o[n.depth]+1:1;for(let l=n.depth;l<n.depth+n.rowSpan;l++)o[l]=(o[l]||0)+n.headerColSpan}),m.updateLeft(r,e,t),m.updateRight(r,e,t),r}function N(e,t,r,i=0){const o=[];if(!e)return[];e&&e.length===void 0&&(e=[e]),e.filter(a=>a&&a.props?!a.props.hidden:!a.hidden).forEach((a,d)=>{a=a.props?a.props:a;const l=t[d]||null,c=N(a.children,l&&l.children||[],r,i+1);o.push(Object.assign({depth:i},b.gridDefaultProps,c.length?{cell:()=>null,filterCell:()=>null}:{},l?{width:l.width,orderIndex:l.orderIndex}:{},a,{id:a.id?a.id:m.tableKeyboardNavigationTools.generateNavigatableId(`${r.prevId++}`,r.idPrefix,"column"),declarationIndex:o.length,children:c,headerColSpan:a.headerColSpan,rowSpan:0,columnType:a.columnType||"data",colSpan:a.colSpan||1,isAccessible:!0,left:a.lockedColumn?l&&Math.floor(l.left):null,right:a.lockedColumn?l&&Math.floor(l.right):null,rowSpannable:a.rowSpannable}))});const n=(a,d)=>a.orderIndex===d.orderIndex?a.declarationIndex-d.declarationIndex:(a.orderIndex||0)-(d.orderIndex||0);if(o.sort(n),i===0){const a=[],d=(l,c)=>l.forEach(f=>{f.parentIndex=c,d(f.children,a.push(f)-1)});return d(o,-1),a}return o}const D=e=>Array.isArray(e)?e:e?e.data:[];function q(e,t,r,i){const o=D(e),s=[];if(o.length>0){let n=o[0];if(t)for(let d=0;d<t.length;d++)n=n.items&&n.items[0];Object.getOwnPropertyNames(n).forEach(d=>{d!==r.column&&s.push(Object.assign({id:m.tableKeyboardNavigationTools.generateNavigatableId(`${i.prevId++}`,i.idPrefix,"column"),declarationIndex:-1,parentIndex:-1,depth:0,colSpan:0,headerColSpan:0,rowSpan:0,index:0,columnType:"data",left:0,right:0,rightBorder:!1,children:[],ariaColumnIndex:0,isAccessible:!0},b.gridDefaultProps,{field:d}))})}return s}const B=(e,t)=>{let r=e[t.parentIndex];for(;r;){if(r.footerCell)return!0;r=e[r.parentIndex]}return!1},F=e=>e.filter(t=>B(e,t)?!1:!!t.footerCell||!(t.children&&t.children.length>0)),H=e=>e.width!==void 0?Math.floor(parseFloat(e.width.toString()))+"px":void 0,_=(e,t)=>t&&t.filter(r=>r.field===e).length>0,E=e=>(e.sort((t,r)=>t.declarationIndex-r.declarationIndex),e.map(t=>{const{declarationIndex:r,parentIndex:i,depth:o,headerColSpan:s,rowSpan:n,index:a,kFirst:d,children:l,...c}=t;return l.length?{children:E(l),...c}:c})),R=e=>{const{filterCell:t,headerCell:r,footerCell:i,cells:o,cell:s,rowSpannable:n,...a}=e;return e.children.length?{...a,children:e.children.map(R)}:a},$=typeof window!="undefined"&&/Firefox/.test(window.navigator.userAgent),z=17895697,V=e=>{let t=[];return e.sortable&&(t=t.concat([u.GridContextMenuItemNames.sortAsc,u.GridContextMenuItemNames.sortDesc])),t},L=e=>{let t=[];return e.clipboard&&(t=t.concat([u.GridContextMenuItemNames.copySelection,u.GridContextMenuItemNames.copySelectionNoHeaders,u.GridContextMenuItemNames.paste])),e.editable&&(t.length&&(t=t.concat([u.GridContextMenuItemNames.separator])),t=t.concat([u.GridContextMenuItemNames.create,u.GridContextMenuItemNames.edit,u.GridContextMenuItemNames.delete])),e.selectable&&(t.length&&(t=t.concat([u.GridContextMenuItemNames.separator])),t=t.concat([u.GridContextMenuItemNames.select])),e.rowReorderable&&(t.length&&(t=t.concat([u.GridContextMenuItemNames.separator])),t=t.concat([u.GridContextMenuItemNames.reorderRow])),t},W=(e,t)=>{if(!(!e&&!t))return t?e?{...e,...t,select:{...e.select||{},...t.select||{}},hierarchy:{...e.hierarchy||{},...t.hierarchy||{}},group:{...e.group||{},...t.group||{}},edit:{...e.edit||{},...t.edit||{}}}:t:e},K=e=>{var r;return typeof e=="object"?(r=e.enabled)!=null?r:!0:e!=null?e:!1},Q=()=>O.ServerFragment===j.ClientFragment,J=e=>!!(e&&e.$$typeof===Symbol.for("react.client.reference")),P=e=>({id:e.id,ariaColumnIndex:e.ariaColumnIndex,isSelected:e.isSelected,isInEdit:e.isInEdit,isSorted:e.isSorted,isAlt:e.isAlt,expanded:e.expanded,className:e.className,style:e.style,field:e.field,dataItem:e.dataItem,format:e.format,colSpan:e.colSpan,dataIndex:e.dataIndex,columnIndex:e.columnIndex,columnsCount:e.columnsCount,rowType:e.rowType,level:e.level,editor:e.editor,render:e.render,locked:e.locked,isRtl:e.isRtl,rowDataIndex:e.rowDataIndex,columnPosition:e.columnPosition,group:e.group}),U=e=>{var i,o;const t=typeof e=="object"?(i=e.enabled)!=null?i:!0:e!=null?e:!1,r=typeof e=="object"?(o=e.valueGetter)!=null?o:(s,n)=>y.getter(n)(s):(s,n)=>y.getter(n)(s);return{enabled:t,valueGetter:r}},A=e=>{var t;return S.isValidElement(e)?e:(t=S.Children.toArray(e))==null?void 0:t[0]},X=(e,t)=>{const r=A(e);return r?S.cloneElement(r,t):null};exports.autoGenerateColumns=q;exports.clientColumn=R;exports.cloneReactElement=X;exports.firefox=$;exports.firefoxMaxHeight=z;exports.flatData=w;exports.footerColumns=F;exports.getClientCellProps=P;exports.getColSpan=k;exports.getColumnWidth=H;exports.getDataAsArray=D;exports.getDefaultBodyContextMenuItems=L;exports.getDefaultHeadContextMenuItems=V;exports.getNestedValue=M;exports.getReactElement=A;exports.getRowSpanOptions=U;exports.isClient=Q;exports.isClientReference=J;exports.isRowReorderEnabled=K;exports.isSorted=_;exports.mapColumns=G;exports.readColumns=N;exports.resolveCells=W;exports.sanitizeColumns=E;
