/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2025 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const D=require("react"),q=require("@progress/kendo-charts"),k=require("@progress/kendo-react-common"),x=require("../package-metadata.js"),H=require("./propTypes.js"),p=require("./SankeyTooltip.js");function _(e){const a=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(a,t,r.get?r:{enumerable:!0,get:()=>e[t]})}}return a.default=e,Object.freeze(a)}const o=_(D),j=12,y={offset:j,visible:!0},I=["nodeEnter","nodeLeave","linkEnter","linkLeave","nodeClick","linkClick"],K=(e,a)=>{e&&(e.unbind(),I.forEach(t=>{a[t]&&e.bind(t,a[t])}))},b=o.forwardRef((e,a)=>{k.validatePackage(x.packageMetadata);const t=o.useRef(null),r=o.useRef(null),s=k.useRtl(t,e.dir,[e.dir,t.current]),d=o.useRef(null),{data:m,links:g,nodes:v,labels:C,title:E,legend:T,tooltip:u=y,disableAutoLayout:R,disableKeyboardNavigation:L}=e,S=o.useRef();S.current=e;const[O,h]=o.useState(null),N=o.useCallback(l=>{const{visible:c,offset:n=j,nodeComponent:f=p.NodeTooltipContent,linkComponent:M=p.LinkTooltipContent}={...y,...u};if(c){const w={event:l,offset:n,dir:s,Content:l.targetType==="node"?f:M};h(w)}},[u,s]),P=o.useCallback(()=>{h(null)},[]),i=o.useCallback((l,c)=>{const n=S.current[l];if(n){const f={...c,nativeEvent:c.originalEvent,target:d.current};n.call(void 0,f)}},[]);return o.useEffect(()=>{const l={data:m,links:g,nodes:v,labels:C,title:E,legend:T,disableAutoLayout:R,disableKeyboardNavigation:L,rtl:s==="rtl",tooltip:{...y,...u}};if(r.current)r.current.setOptions(l);else if(k.canUseDOM&&t.current){const c=q.sankeyTheme(t.current);r.current=new q.Sankey(t.current,l,c),K(r.current,{nodeEnter:n=>{i("onNodeEnter",n)},nodeLeave:n=>{i("onNodeLeave",n)},linkEnter:n=>{i("onLinkEnter",n)},linkLeave:n=>{i("onLinkLeave",n)},nodeClick:n=>{i("onNodeClick",n)},linkClick:n=>{i("onLinkClick",n)}}),r.current.bind("tooltipShow",N),r.current.bind("tooltipHide",P)}return()=>{r.current&&(r.current.destroy(),r.current=null)}},[m,g,v,C,E,T,R,L,s,u,P,N,i]),o.useImperativeHandle(d,()=>({get element(){return t.current},exportVisual:l=>r.current.exportVisual(l),props:e}),[]),o.useImperativeHandle(a,()=>d.current),o.createElement(o.Fragment,null,o.createElement("div",{ref:t,className:e.className,style:e.style,dir:s}),O&&o.createElement(p.TooltipComponent,{...O}))});b.propTypes=H.sankeyPropTypes;b.displayName="KendoReactSankey";exports.Sankey=b;
